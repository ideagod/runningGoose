webpackJsonp([9],{XtNp:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t("mtWM"),a=t.n(n),o={data:function(){return{userInformation:{},PhoneFormVisible:!1,addressFormVisible:!1,changeForm:{newPhone:"",newAddress:""},rules:{newPhone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-8][0-9]{9}$/,message:"手机号码格式不正确",trigger:"blur"}]}}},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var s=this,e=this.$loading({lock:!0,text:"玩命加载中..."});a.a.get("/users/userInformation").then(function(t){var n=t.data;e.close(),"0"==n.status?(s.userInformation=n.result,s.changeForm.newPhone=n.result.phoneNum,s.changeForm.newAddress=n.result.address):console.log(n.msg)}).catch(function(s){console.log(s)})},handleChangePhone:function(s){var e=this;this.$refs[s].validate(function(s){if(!s)return!1;e.PhoneFormVisible=!1,a.a.get("/users/userInformation/ChangePhone?phoneNum="+e.changeForm.newPhone).then(function(s){var t=s.data;"0"==t.status?(e.$message({message:"恭喜你，修改成功!",type:"success",showClose:!0}),e.getUserInfo()):(console.log(t.msg),e.$message({message:"修改失败! 请重试",type:"error",showClose:!0}))}).catch(function(s){console.log(s)})})},handleChangeAddress:function(s){var e=this;this.$refs[s].validate(function(s){if(!s)return!1;e.addressFormVisible=!1,a.a.get("/users/userInformation/ChangeAddress?newAddress="+e.changeForm.newAddress).then(function(s){var t=s.data;"0"==t.status?(e.$message({message:"恭喜你，修改成功!",type:"success",showClose:!0}),e.getUserInfo()):(console.log(t.msg),e.$message({message:"修改失败! 请重试",type:"error",showClose:!0}))}).catch(function(s){console.log(s)})})}}},i={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"userInformation"},[t("person-title",[s._v("当前位置 :: 个人中心 >> "),t("em",[s._v("我的信息")])]),s._v(" "),t("div",{staticClass:"information-cont"},[t("div",{staticClass:"userinfo-body"},[t("h3",{staticClass:"title"},[s._v("我的信息")]),s._v(" "),t("div",{staticClass:"userinfo-cont"},[t("div",{staticClass:"userinfo-cont-left"},[t("div",{staticClass:"cont-left-hedaer"},[t("div",{staticClass:"header-name"},[t("div",{staticClass:"circle",class:{woman:0==s.userInformation.gender}},[t("span",[s._v(s._s(s.userInformation.userName))])]),s._v(" "),t("div",{staticClass:"gender"},[t("span",[s._v(s._s(0==s.userInformation.gender?"女":"男"))])])]),s._v(" "),t("ul",{staticClass:"left-info-list"},[t("li",{staticClass:"info-item"},[t("i",{staticClass:"el-icon-mobile-phone",staticStyle:{color:"#409EFF"}}),s._v(" "),t("span",{staticClass:"title"},[s._v("用户账号 :")]),s._v(" \n                                "+s._s(s.userInformation.userId)+"\n                            ")]),s._v(" "),t("li",{staticClass:"info-item"},[t("i",{staticClass:"el-icon-star-on",staticStyle:{color:"#409EFF"}}),s._v(" "),t("span",{staticClass:"title"},[s._v("用户等级 :")]),s._v("\n                                "+s._s(0==s.userInformation.grade?"普通用户":"工作人员")+"\n                            ")]),s._v(" "),t("li",{staticClass:"info-item"},[t("i",{staticClass:"el-icon-phone",staticStyle:{color:"#409EFF"}}),s._v(" "),t("span",{staticClass:"title"},[s._v("联系电话 :")]),s._v("\n                                "+s._s(s.userInformation.phoneNum)+"\n                                "),t("i",{staticClass:"el-icon-edit changeinfo",on:{click:function(e){s.PhoneFormVisible=!0}}})]),s._v(" "),t("li",{staticClass:"info-item"},[t("i",{staticClass:"el-icon-time",staticStyle:{color:"#409EFF"}}),s._v(" "),t("span",{staticClass:"title"},[s._v("注册时间 :")]),s._v("\n                                "+s._s(s.userInformation.regDate)+"\n                            ")])])]),s._v(" "),t("div",{staticClass:"cont-left-footer"},[t("div",{staticClass:"address"},[t("span",{staticClass:"cont"},[s._v("地址:"+s._s(s.userInformation.address))]),s._v(" "),t("i",{staticClass:"el-icon-edit changeinfo",on:{click:function(e){s.addressFormVisible=!0}}})]),s._v(" "),t("div",{staticClass:"lastLoginTime"},[t("em",{staticClass:"title"},[s._v("上次登录 :")]),s._v(" "),t("span",{staticClass:"time"},[s._v(s._s(s.userInformation.lastLoginTime))])])])]),s._v(" "),t("div",{staticClass:"userinfo-cont-right"},[1==s.userInformation.grade?[t("h4",{staticClass:"title"},[s._v("账号余额")]),s._v(" "),t("span",{staticClass:"balance"},[s._v(s._s(s._f("priceInit")(s.userInformation.balance)))])]:[t("h4",{staticClass:"title"},[s._v("订单总数")]),s._v(" "),t("span",{staticClass:"orderNum"},[s._v(s._s(s.userInformation.orderNum)+" 笔")])],s._v(" "),t("i",{staticClass:"line"})],2)])]),s._v(" "),t("div",{staticClass:"changePhone"},[t("el-dialog",{attrs:{title:"修改联系号码",visible:s.PhoneFormVisible},on:{"update:visible":function(e){s.PhoneFormVisible=e}}},[t("el-form",{ref:"userphone",attrs:{model:s.changeForm,rules:s.rules},nativeOn:{submit:function(s){s.preventDefault()}}},[t("el-form-item",{attrs:{label:"联系电话 :",prop:"newPhone"}},[t("el-input",{model:{value:s.changeForm.newPhone,callback:function(e){s.$set(s.changeForm,"newPhone",e)},expression:"changeForm.newPhone"}})],1)],1),s._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){s.PhoneFormVisible=!1}}},[s._v("取 消")]),s._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){s.handleChangePhone("userphone")}}},[s._v("确 定")])],1)],1)],1),s._v(" "),t("div",{staticClass:"changeAddress"},[t("el-dialog",{attrs:{title:"修改联系地址",visible:s.addressFormVisible},on:{"update:visible":function(e){s.addressFormVisible=e}}},[t("el-form",{ref:"newAddress",attrs:{model:s.changeForm,rules:s.rules},nativeOn:{submit:function(s){s.preventDefault()}}},[t("el-form-item",{attrs:{label:"联系地址 :",prop:"newAddress"}},[t("el-input",{model:{value:s.changeForm.newAddress,callback:function(e){s.$set(s.changeForm,"newAddress",e)},expression:"changeForm.newAddress"}})],1)],1),s._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){s.addressFormVisible=!1}}},[s._v("取 消")]),s._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){s.handleChangeAddress("newAddress")}}},[s._v("确 定")])],1)],1)],1)])],1)},staticRenderFns:[]};var r=t("VU/8")(o,i,!1,function(s){t("dEjy"),t("gpj8")},"data-v-5a75d0fb",null);e.default=r.exports},dEjy:function(s,e){},gpj8:function(s,e){}});