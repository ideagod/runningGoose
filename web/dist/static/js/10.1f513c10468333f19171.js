webpackJsonp([10],{A3Qx:function(t,e){},imXc:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("mtWM"),i=o.n(r),s={data:function(){var t=this,e=function(e,o,r){t.randomCode!=t.$data.loginForm.validateCode?r(new Error("验证码不正确 !")):r()};return{inputType:"password",randomCode:"",codeImg:"",loginForm:{userId:"",passWord:"",validateCode:"",grade:0},loginRules:{userId:[{required:!0,message:"请输入账号",trigger:"blur"},{pattern:/^1[3-8][0-9]{9}$/,message:"手机号格式不正确",trigger:"blur"}],passWord:[{required:!0,message:"请输入密码",trigger:"blur"}],validateCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:e,trigger:"blur"},{validator:e,trigger:"change"}]},validateCodeImg:["./static/img/login-Verification-1.png","./static/img/login-Verification-2.png","./static/img/login-Verification-3.png","./static/img/login-Verification-4.png"]}},mounted:function(){var t=this;this.randomCode=this.randomNum(),this.codeImg=this.randomCodeimg(),window.onkeydown=function(e){13==window.event.keyCode&&t.submitForm("loginForm")}},methods:{randomNum:function(){return Math.random().toString(16).slice(-6)},randomCodeimg:function(){return this.validateCodeImg[Math.floor(4*Math.random())]},changeInputType:function(){this.inputType="password"==this.inputType?"text":"password"},handlechangeImg:function(){this.codeImg=this.randomCodeimg(),this.randomCode=this.randomNum()},userLogin:function(t,e){var o=this;i.a.post(t,e).then(function(t){var e=t.data;"0"==e.status?(o.$notify({title:"登录成功",message:"恭喜你! 登录成功!",duration:2e3,type:"success"}),o.$router.push({path:"/home"})):o.$notify({title:"登录失败",message:e.msg,duration:2e3,type:"error"})}).catch(function(t){console.log(t)})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;var o={userId:e.loginForm.userId,passWord:e.loginForm.passWord,grade:e.loginForm.grade};e.userLogin("/users/login",o)})},resetForm:function(t){this.$refs[t].resetFields()}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"right-login-body"},[t._m(0),t._v(" "),o("div",{staticClass:"form-cont"},[o("el-form",{ref:"loginForm",staticClass:"user-loginForm",attrs:{model:t.loginForm,rules:t.loginRules,"label-width":"7rem"}},[o("el-form-item",{attrs:{label:"账号",prop:"userId"}},[o("el-input",{attrs:{placeholder:"请输入账号"},model:{value:t.loginForm.userId,callback:function(e){t.$set(t.loginForm,"userId",e)},expression:"loginForm.userId"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"passWord"}},[o("el-input",{attrs:{type:t.inputType,placeholder:"请输入密码"},model:{value:t.loginForm.passWord,callback:function(e){t.$set(t.loginForm,"passWord",e)},expression:"loginForm.passWord"}}),t._v(" "),o("i",{staticClass:"toggle el-icon-view",class:{color:""==t.loginForm.passWord},on:{click:t.changeInputType}})],1),t._v(" "),o("el-form-item",{staticClass:"code",attrs:{label:"验证码",prop:"validateCode"}},[o("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:t.loginForm.validateCode,callback:function(e){t.$set(t.loginForm,"validateCode","string"==typeof e?e.trim():e)},expression:"loginForm.validateCode"}})],1),t._v(" "),o("div",{staticClass:"rightCode"},[o("div",{staticClass:"rightCode-cont",on:{click:t.handlechangeImg}},[o("img",{staticClass:"Code-bg",attrs:{src:t.codeImg,alt:"验证码图片"}}),t._v(" "),o("span",{staticClass:"randomCode"},[t._v(t._s(t.randomCode))])])]),t._v(" "),o("el-form-item",{staticClass:"grade",attrs:{label:"级别 : ",prop:"grade"}},[o("el-radio-group",{model:{value:t.loginForm.grade,callback:function(e){t.$set(t.loginForm,"grade",t._n(e))},expression:"loginForm.grade"}},[o("el-radio",{attrs:{label:0}},[t._v("普通用户")]),t._v(" "),o("el-radio",{attrs:{label:1}},[t._v("工作人员")])],1)],1)],1)],1),t._v(" "),o("div",{staticClass:"right-cont-btn"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("loginForm")}}},[t._v("登录")]),t._v(" "),o("el-button",{on:{click:function(e){t.resetForm("loginForm")}}},[t._v("重置")])],1),t._v(" "),o("div",{staticClass:"footer"},[o("router-link",{staticClass:"link footer-left",attrs:{to:"/register"}},[t._v("注册")]),t._v(" "),o("router-link",{staticClass:"link footer-right",attrs:{to:"/forgotPassword"}},[t._v("忘记密码?")])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"top-header-cont"},[e("div",{staticClass:"head-pic"},[e("img",{attrs:{src:o("s/9k"),alt:"头像框"}})])])}]};var n=o("VU/8")(s,a,!1,function(t){o("A3Qx")},null,null);e.default=n.exports},"s/9k":function(t,e,o){t.exports=o.p+"static/img/login-head-pic.de92b0d.jpg"}});