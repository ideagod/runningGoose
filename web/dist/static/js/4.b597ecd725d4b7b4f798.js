webpackJsonp([4],{YlI6:function(e,t,r){"use strict";var s=r("6T4k"),n={props:{userOrder:Array,listType:{noCompBtn:Boolean},titleList:{id:Number,columnTitle:String,prop:String,sortable:Boolean}},data:function(){return{isnoCompBtn:this.listType.noCompBtn,tabletitleList:this.titleList,search:""}},computed:{theUserOrder:function(){var e=this;return this.userOrder.filter(function(t){return!e.search||t.goodsCode.toString().includes(e.search)||t.goodsTpye.toString().includes(e.search)||t.company.toString().includes(e.search)||t.orderId.toString().includes(e.search)})}},methods:{handleGotoNewOrde:function(){s.a.$emit("goNewOrder","newOrder"),this.$router.push({path:"newOrder"})}}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-table",{staticClass:"userOrderList",staticStyle:{width:"100%"},attrs:{data:e.theUserOrder,"default-sort":{prop:"createTime",order:"descending"}}},[r("div",{staticClass:"emptyTip",attrs:{slot:"empty"},slot:"empty"},[e._v("\n        暂时没有订单 , 赶紧去\n        "),r("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.handleGotoNewOrde(t)}}},[e._v(" 发布订单 ")]),e._v("吧\n    ")]),e._v(" "),r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"userTable demo-table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"订单号 :"}},[r("span",[e._v(e._s(t.row.orderId))])]),e._v(" "),r("el-form-item",{attrs:{label:"发布时间 :"}},[r("span",[e._v(e._s(t.row.createTime))])]),e._v(" "),t.row.completedData?r("el-form-item",{attrs:{label:"完成时间 :"}},[r("span",[e._v(e._s(t.row.completedData))])]):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"快递类型 :"}},[r("span",[e._v(e._s(t.row.goodsTpye))])]),e._v(" "),r("el-form-item",{attrs:{label:"快递大小 :"}},[r("span",[e._v(e._s(t.row.goodsSize))])]),e._v(" "),r("el-form-item",{attrs:{label:"订单价格 :"}},[r("span",[e._v(e._s(e._f("priceInit")(t.row.Price))+" 元")])]),e._v(" "),r("el-form-item",{attrs:{label:"快递数量 :"}},[r("span",[e._v(e._s(t.row.goodsNumber)+" 个")])]),e._v(" "),r("el-form-item",{attrs:{label:"快递公司 :"}},e._l(t.row.company,function(t){return r("span",{key:t},[e._v(e._s(t))])})),e._v(" "),r("el-form-item",{attrs:{label:"取货码 :"}},e._l(t.row.goodsCode,function(t){return r("span",{key:t},[e._v(e._s(t))])})),e._v(" "),"未接单"!=t.row.orderState?[r("el-form-item",{attrs:{label:"接单人员 :"}},[r("span",[e._v(e._s(t.row.courierPeople))])]),e._v(" "),r("el-form-item",{attrs:{label:"接单人电话 :"}},[r("span",[e._v(e._s(t.row.courierPhone))])]),e._v(" "),r("el-form-item",{attrs:{label:"接单时间 :"}},[r("span",[e._v(e._s(t.row.receivedDate))])])]:e._e(),e._v(" "),r("el-form-item",{attrs:{label:"备注 :"}},[r("span",[e._v(e._s(t.row.remarks))])])],2)]}}])}),e._v(" "),e._l(e.tabletitleList,function(e){return r("el-table-column",{key:e.id,attrs:{sortable:e.sortable,label:e.columnTitle,prop:e.prop}})}),e._v(" "),r("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-input",{attrs:{size:"mini",placeholder:"关键词:取货码 |订单号 |类型 |快递公司"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[e.isnoCompBtn?[r("el-button",{key:"Cancel",staticClass:"btn-cancel",attrs:{size:"mini",type:"danger"},on:{click:function(r){e.$emit("CancelOrder",t.row)}}},[e._v("取消订单")]),e._v(" "),r("el-button",{key:"Success",staticClass:"btn-success",attrs:{size:"mini"},on:{click:function(r){e.$emit("completedOrderr",t.row)}}},[e._v("确认送达")])]:[r("el-button",{key:"Delete",attrs:{size:"mini",type:"danger"},on:{click:function(r){e.$emit("DeleteOrder",t.row)}}},[e._v("删除订单")])]]}}])})],2)},staticRenderFns:[]};var a=r("VU/8")(n,o,!1,function(e){r("lFh1")},null,null);t.a=a.exports},dP0r:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("YlI6"),n=r("mtWM"),o=r.n(n),a={data:function(){return{noCompOrder:[],listType:{noCompBtn:!0},titleList:[{id:1,columnTitle:"发布时间",prop:"createTime",sortable:!0},{id:2,columnTitle:"订单价格(元)",prop:"Price",sortable:!0},{id:3,columnTitle:"订单状态",prop:"orderState",sortable:!1}]}},components:{userOrderList:s.a},mounted:function(){this.getUserOrder()},methods:{getUserOrder:function(){var e=this,t=this.$loading({lock:!0,text:"玩命加载中..."});o.a.get("/users/userCurrentOrder").then(function(r){var s=r.data;t.close(),"0"==s.status?e.noCompOrder=s.result:console.log(s.msg)}).catch(function(e){console.log(e)})},handleCancel:function(e){var t=this;this.$confirm("此操作将取消订单, 是否继续?","取消订单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){var r=t.$loading({lock:!0,text:"正在取消订单..."});o.a.get("/users/cancelCurrentOrder?orderId="+e.orderId).then(function(e){var s=e.data;r.close(),"0"==s.status?(t.$message({type:"success",message:"取消成功!"}),t.getUserOrder()):t.$message({type:"error",message:s.msg})}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},handleCompleted:function(e){var t=this;this.$confirm("是否确认送达,完成订单?","支付订单",{confirmButtonText:"确认",cancelButtonText:"取消",type:"success"}).then(function(){var r=t.$loading({lock:!0,text:"正在完成订单..."});o.a.post("/users/completedCurrentOrder",e).then(function(e){var s=e.data;r.close(),"0"==s.status?(t.$message({type:"success",message:"收货成功!"}),t.getUserOrder()):t.$message({type:"error",message:s.msg})}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"currentOrder"},[r("person-title",[e._v("当前位置 :: 我的订单 >> "),r("em",[e._v("当前订单")])]),e._v(" "),r("div",{staticClass:"currentOrder-cont"},[r("userOrderList",{attrs:{userOrder:e.noCompOrder,listType:e.listType,titleList:e.titleList},on:{CancelOrder:e.handleCancel,completedOrderr:e.handleCompleted}})],1)],1)},staticRenderFns:[]};var i=r("VU/8")(a,l,!1,function(e){r("kX7a")},null,null);t.default=i.exports},kX7a:function(e,t){},lFh1:function(e,t){}});